(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(45),c=n.n(o),i=n(1),u=n(8),l=n(46),s=n.n(l),d=function(e){var t=e.error;return r.a.createElement("div",{className:"skeleton__video"},t?"":r.a.createElement("div",{className:"skeleton__video--loading"},r.a.createElement(s.a,null)))};n(47);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var p=Object(i.g)((function(e){var t=e.history,n=f(Object(a.useState)(!1),2),o=n[0],i=n[1],l=f(Object(a.useState)(!1),2),s=l[0],m=l[1],p=f(Object(a.useState)(0),2),v=p[0],b=p[1],y=f(Object(a.useState)(null),2),E=y[0],g=y[1],h=function(e){c.a.stop(),"not-found"===e?t.push("/product/".concat(e,"?code=").concat(E)):t.push("/product/".concat(e))},_=function e(t){c.a.offDetected(e),fetch("https://world.openfoodfacts.org/api/v0/product/".concat(t.codeResult.code,".json")).then((function(e){return e.json()})).then((function(e){return j(e)}))},j=function(e){var t=e.status,n=e.code;g(n),b((function(e){return e+1})),1===t?h(n):c.a.onDetected(_)};return Object(a.useEffect)((function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(c.a.init({inputStream:{name:"Live",type:"LiveStream",target:document.querySelector("#video")},numOfWorkers:1,locate:!0,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","code_128_reader"]}},(function(e){e?m(!0):(c.a.start(),i(!0))})),c.a.onDetected(_))}),[]),Object(a.useEffect)((function(){v>3&&h("not-found")}),[v]),r.a.createElement("div",null,r.a.createElement("div",{className:"video__explanation"},r.a.createElement("p",null,"Escaneie produto's pelo código de barras e pegue seus nutrientes ",r.a.createElement("span",{role:"img","aria-label":"apple"},"🍎"))),r.a.createElement("div",{className:"video__container"},s?r.a.createElement("div",{className:"skeleton__unsopported"},r.a.createElement("div",null,r.a.createElement("p",null,"Parece que seu dispositivo não tem acesso a uma câmera ",r.a.createElement("span",{role:"img","aria-label":"thinking-face"},"🤔")),r.a.createElement("p",null,"Você pode digitar o código de barras abaixo"),r.a.createElement(u.a,null))):r.a.createElement("div",null,r.a.createElement("div",{className:"video",id:"video"}),o?"":r.a.createElement(d,null))))}));t.default=p}}]);